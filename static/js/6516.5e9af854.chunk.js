"use strict";(self.webpackChunkmintbox_app=self.webpackChunkmintbox_app||[]).push([[6516],{2265:function(e,n,t){t.d(n,{B3:function(){return f},pl:function(){return h}});var a=t(1413),r=t(4165),i=t(5861),o=t(81),c=t(456),s=t(6960),l=t(8848),u="mintbox",d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,t,a=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:"",e.next=3,o.Z.getSmallcasetoken(n).then((function(e){return e}));case 3:if(!(t=e.sent).type){e.next=11;break}return console.log("Initializing with New Token =>>",t.data),e.next=8,l.Z.set(l.Z.model.smallcaseSDKToken,t.data);case 8:window.sc=new window.scDK({gateway:u,smallcaseAuthToken:t.data}),e.next=13;break;case 11:return e.next=13,d();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get(l.Z.model.smallcaseSDKToken).then(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===n||1e3*(0,c.Z)(n).exp<(new Date).getTime())){e.next=5;break}return e.next=3,l.Z.get(l.Z.model.user).then(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get(l.Z.model.clientData).then(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,c,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=23;break}return e.next=3,o.Z.getClient(n.userData.id).then((function(e){return e}));case 3:if(!0!==(i=e.sent).type){e.next=19;break}return c=JSON.parse(i.data),s=c.reduce((function(e,n){return(0,a.Z)((0,a.Z)({},e),n)}),{}),console.log("Get Client API :",s),e.next=10,l.Z.set(l.Z.model.clientData,JSON.stringify(s));case 10:if(!s.SmallcaseInfo.length){e.next=15;break}return e.next=13,d(s.SmallcaseInfo[0].AuthId);case 13:e.next=17;break;case 15:return e.next=17,d();case 17:e.next=21;break;case 19:return e.next=21,d();case 21:case 27:e.next=31;break;case 23:if(!t.SmallcaseInfo.length){e.next=29;break}return console.log("user auth id => ",t.SmallcaseInfo[0].AuthId),e.next=27,d(t.SmallcaseInfo[0].AuthId);case 29:return e.next=31,d();case 31:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){s.Am.error(e)}));case 3:e.next=6;break;case 5:void 0===window.sc?(console.log("Initializing with existing sdktoken -> ",n),window.sc=new window.scDK({gateway:u,smallcaseAuthToken:n})):console.log("smallcase already initialized");case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,t,a=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:"",e.next=3,o.Z.getSmallcasetoken(n).then((function(e){return e}));case 3:(t=e.sent).type&&(console.log("New Token =>>",t.data),l.Z.set(l.Z.model.smallcaseSDKToken,t.data),window.sc.init({smallcaseAuthToken:t.data}).then((function(e){console.log("Smallcase init complete",e)})).catch((function(e){console.log(e.message),p()})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t,a){var i,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={clientId:n,broker:a,smallcaseAuthToken:t},console.log(i),e.next=4,o.Z.saveSmallCaseAuthId(i).then((function(e){return e}));case 4:if(c=e.sent,console.log(c),!c.type){e.next=18;break}if("failure"!==c.data.Result){e.next=12;break}return console.log("failedddddddd"),e.abrupt("return",!1);case 12:return e.next=14,p(c.data.AuthId);case 14:return console.log("yeahhhhh"),e.abrupt("return",!0);case 16:e.next=19;break;case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}()},2102:function(e,n,t){t(2791);var a=t(8820),r=t(9126),i=t(3853),o=t(8617),c=t(7811),s=t(184);n.Z=function(e){var n=e.header,t=e.navigation,l=e.screenType,u=e.backAction,d=void 0===u?function(){t.goBack()}:u,f=e.right,p=e.rightAction,h=void 0===p?function(){}:p,m=e.isWatchlisted,g=void 0!==m&&m,x=e.onWatchlistIconClick,k=void 0===x?function(){}:x,w=e.onShareIconClick,v=void 0===w?function(){}:w,y=e.onHeaderClick,Z=void 0===y?function(){}:y;return(0,s.jsxs)("div",{className:"mainHeader sticky-top",children:["Home"!==l&&(0,s.jsx)("div",{style:{marginRight:"4%",minWidth:"8%"},children:(0,s.jsx)(i.Ao2,{color:c.Z.getPropertyValue("--secondaryGreen"),size:24,onClick:function(){return d()}})}),(0,s.jsx)("div",{style:{flex:1},children:(0,s.jsx)("span",{className:"screenTitle",onClick:function(){return Z()},children:n})}),(0,s.jsx)("div",{style:{display:"flex"},children:function(){switch(f){case"bookmark-share":return(0,s.jsxs)("span",{children:[g?(0,s.jsx)(r.vw0,{className:"secondaryGreen",size:24,onClick:k}):(0,s.jsx)(r.flH,{className:"secondaryGreen",size:24,onClick:k}),(0,s.jsx)(o.qyl,{className:"secondaryGreen",size:24,style:{marginLeft:"20px"},onClick:v})]});case"tip":return(0,s.jsxs)("span",{className:"header3dark secondaryGreen",onClick:function(){return h()},children:["Tip ",(0,s.jsx)(a.cuw,{size:10})]});default:return f?(0,s.jsx)("span",{className:"greenChipHeader",onClick:function(){h()},children:f}):(0,s.jsx)(s.Fragment,{})}}()})]})}},6516:function(e,n,t){t.r(n);var a=t(4165),r=t(5861),i=t(8848),o=(t(2791),t(8820)),c=t(6960),s=t(81),l=t(2265),u=t(2102),d=t(184);n.default=function(e){var n=function(){var n=(0,r.Z)((0,a.Z)().mark((function n(){var t;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(2!==e.location.state.type){n.next=4;break}e.history.replace("/activate-direct-mf/get-started"),n.next=15;break;case 4:return n.next=6,s.Z.getSmallcaseTransactionId({intent:"CONNECT"}).then((function(e){return e}));case 6:if(!(t=n.sent).type){n.next=15;break}if(console.log("Trx id =>>",t.data.data.transactionId),void 0!==window.sc){n.next=13;break}return console.log("Initializing Smallcase"),n.next=13,(0,l.B3)();case 13:return n.next=15,window.sc.triggerTransaction({transactionId:t.data.data.transactionId}).then((function(n){console.log(n),n&&(0,l.pl)(e.location.state.ClientId,n.smallcaseAuthToken,n.broker).then((function(n){console.log(n),n?(i.Z.remove(i.Z.model.clientData),c.Am.success("Demat linked"),e.history.goBack()):c.Am.error("Demat already linked with another mintbox account")}))})).catch((function(e){"user_cancelled"!==e.message&&c.Am.error("Something went wrong! Try again.")}));case 15:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),t=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==window.sc){e.next=4;break}return console.log("Initializing Smallcase"),e.next=4,(0,l.B3)();case 4:window.sc.signup().then((function(){console.log("signup flow has now ended")}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)("div",{className:"mainContainer",children:[(0,d.jsx)(u.Z,{header:1===e.location.state.type?"Link a demat":"Activate mutual funds",navigation:e.history}),(0,d.jsxs)("div",{className:"dataContainer",style:{textAlign:"center"},children:[(0,d.jsx)("img",{src:"https://d3etfstcuyoos5.cloudfront.net/app-images/svg_icons/activate_mf_demat.svg",width:"120px",height:"120px",style:{margin:"40% auto 0 auto"}}),(0,d.jsx)("div",{className:"bigHeader",style:{margin:"4%"},children:2===e.location.state.type?"Activate mutual funds to invest":"Link your demat account to invest"}),(0,d.jsx)("div",{className:"bodyTextLight",children:1===e.location.state.type?"Start investing in low-cost ETFs by linking your existing demat account":2===e.location.state.type?"Activate mutual funds to invest":3===e.location.state.type?"Start investing in mintboxes by linking your existing demat account":""}),(0,d.jsxs)("button",{className:"solidButton",style:{width:"auto",margin:"10% auto",paddingLeft:"20px",paddingRight:"20px"},onClick:function(){return n()},children:[2===e.location.state.type?"Activate in 5 mins":"Link demat account"," ",(0,d.jsx)(o.Td4,{size:14})]}),2===e.location.state.type?(0,d.jsx)(d.Fragment,{}):(0,d.jsx)("div",{className:"header2dark secondaryGreen",onClick:function(){return t()},children:"Open a demat account"})]})]})}},456:function(e,n,t){function a(e){this.message=e}a.prototype=new Error,a.prototype.name="InvalidCharacterError";var r="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var n=String(e).replace(/=+$/,"");if(n.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,r,i=0,o=0,c="";r=n.charAt(o++);~r&&(t=i%4?64*t+r:r,i++%4)?c+=String.fromCharCode(255&t>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return c};function i(e){var n=e.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,(function(e,n){var t=n.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t})))}(n)}catch(e){return r(n)}}function o(e){this.message=e}o.prototype=new Error,o.prototype.name="InvalidTokenError",n.Z=function(e,n){if("string"!=typeof e)throw new o("Invalid token specified");var t=!0===(n=n||{}).header?0:1;try{return JSON.parse(i(e.split(".")[t]))}catch(e){throw new o("Invalid token specified: "+e.message)}}}}]);
//# sourceMappingURL=6516.5e9af854.chunk.js.map