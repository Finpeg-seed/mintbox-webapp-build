"use strict";(self.webpackChunkmintbox_app=self.webpackChunkmintbox_app||[]).push([[7523],{2265:function(e,n,t){t.d(n,{B3:function(){return f},pl:function(){return h}});var r=t(1413),a=t(4165),o=t(5861),c=t(81),i=t(456),s=t(6960),l=t(8848),u="mintbox",d=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n,t,r=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,c.Z.getSmallcasetoken(n).then((function(e){return e}));case 3:if(!(t=e.sent).type){e.next=11;break}return console.log("Initializing with New Token =>>",t.data),e.next=8,l.Z.set(l.Z.model.smallcaseSDKToken,t.data);case 8:window.sc=new window.scDK({gateway:u,smallcaseAuthToken:t.data}),e.next=13;break;case 11:return e.next=13,d();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get(l.Z.model.smallcaseSDKToken).then(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===n||1e3*(0,i.Z)(n).exp<(new Date).getTime())){e.next=5;break}return e.next=3,l.Z.get(l.Z.model.user).then(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get(l.Z.model.clientData).then(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var o,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=23;break}return e.next=3,c.Z.getClient(n.userData.id).then((function(e){return e}));case 3:if(!0!==(o=e.sent).type){e.next=19;break}return i=JSON.parse(o.data),s=i.reduce((function(e,n){return(0,r.Z)((0,r.Z)({},e),n)}),{}),console.log("Get Client API :",s),e.next=10,l.Z.set(l.Z.model.clientData,JSON.stringify(s));case 10:if(!s.SmallcaseInfo.length){e.next=15;break}return e.next=13,d(s.SmallcaseInfo[0].AuthId);case 13:e.next=17;break;case 15:return e.next=17,d();case 17:e.next=21;break;case 19:return e.next=21,d();case 21:case 27:e.next=31;break;case 23:if(!t.SmallcaseInfo.length){e.next=29;break}return console.log("user auth id => ",t.SmallcaseInfo[0].AuthId),e.next=27,d(t.SmallcaseInfo[0].AuthId);case 29:return e.next=31,d();case 31:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){s.Am.error(e)}));case 3:e.next=6;break;case 5:void 0===window.sc?(console.log("Initializing with existing sdktoken -> ",n),window.sc=new window.scDK({gateway:u,smallcaseAuthToken:n})):console.log("smallcase already initialized");case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n,t,r=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,c.Z.getSmallcasetoken(n).then((function(e){return e}));case 3:(t=e.sent).type&&(console.log("New Token =>>",t.data),l.Z.set(l.Z.model.smallcaseSDKToken,t.data),window.sc.init({smallcaseAuthToken:t.data}).then((function(e){console.log("Smallcase init complete",e)})).catch((function(e){console.log(e.message),p()})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,t,r){var o,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={clientId:n,broker:r,smallcaseAuthToken:t},console.log(o),e.next=4,c.Z.saveSmallCaseAuthId(o).then((function(e){return e}));case 4:if(i=e.sent,console.log(i),!i.type){e.next=18;break}if("failure"!==i.data.Result){e.next=12;break}return console.log("failedddddddd"),e.abrupt("return",!1);case 12:return e.next=14,p(i.data.AuthId);case 14:return console.log("yeahhhhh"),e.abrupt("return",!0);case 16:e.next=19;break;case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()},3411:function(e,n,t){function r(e){return(e=e>=1e7?"\u20b9 ".concat((e/1e7).toFixed(2)," cr"):e>=1e5?"\u20b9 ".concat((e/1e5).toFixed(2)," lac"):e>=1e3?"\u20b9 ".concat((e/1e3).toFixed(2)," k"):a(e)).replace("-","")}function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=new Intl.NumberFormat("en-IN",{minimumFractionDigits:0,maximumFractionDigits:n}).format(e);return"\u20b9 ".concat(t)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return"short"===n?r(Number(e)):a(Number(e),t)}t.d(n,{A:function(){return o}})},2102:function(e,n,t){t(2791);var r=t(8820),a=t(9126),o=t(3853),c=t(8617),i=t(7811),s=t(184);n.Z=function(e){var n=e.header,t=e.navigation,l=e.screenType,u=e.backAction,d=void 0===u?function(){t.goBack()}:u,f=e.right,p=e.rightAction,h=void 0===p?function(){}:p,m=e.isWatchlisted,x=void 0!==m&&m,g=e.onWatchlistIconClick,v=void 0===g?function(){}:g,Z=e.onShareIconClick,k=void 0===Z?function(){}:Z,w=e.onHeaderClick,y=void 0===w?function(){}:w;return(0,s.jsxs)("div",{className:"mainHeader sticky-top",children:["Home"!==l&&(0,s.jsx)("div",{style:{marginRight:"4%",minWidth:"8%"},children:(0,s.jsx)(o.Ao2,{color:i.Z.getPropertyValue("--secondaryGreen"),size:24,onClick:function(){return d()}})}),(0,s.jsx)("div",{style:{flex:1},children:(0,s.jsx)("span",{className:"screenTitle",onClick:function(){return y()},children:n})}),(0,s.jsx)("div",{style:{display:"flex"},children:function(){switch(f){case"bookmark-share":return(0,s.jsxs)("span",{children:[x?(0,s.jsx)(a.vw0,{className:"secondaryGreen",size:24,onClick:v}):(0,s.jsx)(a.flH,{className:"secondaryGreen",size:24,onClick:v}),(0,s.jsx)(c.qyl,{className:"secondaryGreen",size:24,style:{marginLeft:"20px"},onClick:k})]});case"tip":return(0,s.jsxs)("span",{className:"header3dark secondaryGreen",onClick:function(){return h()},children:["Tip ",(0,s.jsx)(r.cuw,{size:10})]});default:return f?(0,s.jsx)("span",{className:"greenChipHeader",onClick:function(){h()},children:f}):(0,s.jsx)(s.Fragment,{})}}()})]})}},5709:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(1413),a=t(4165),o=t(5861),c=t(9439),i=t(8848),s=t(2791),l=t(6960),u=t(81),d=t(2265),f=t(3411),p=t(7811),h=t(456),m=t(184);function x(){var e,n,t,x,g,v=s.useState({}),Z=(0,c.Z)(v,2),k=Z[0],w=Z[1],y=s.useState({}),b=(0,c.Z)(y,2),I=b[0],C=b[1],S=s.useState(),N=(0,c.Z)(S,2),T=N[0],j=N[1],A=s.useState(!1),D=(0,c.Z)(A,2);D[0],D[1];s.useEffect((function(){i.Z.get(i.Z.model.user).then(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(n.userData),e.next=3,z(n.userData.id);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),i.Z.get(i.Z.model.dematBalance).then(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n),j(n||0);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[]);var z=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get(i.Z.model.clientData).then(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var o,c,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=7;break}return e.next=3,u.Z.getClient(n).then((function(e){return e}));case 3:!0===(o=e.sent).type&&(c=JSON.parse(o.data),s=c.reduce((function(e,n){return(0,r.Z)((0,r.Z)({},e),n)}),{}),console.log("Get Client API :",s),C(s),i.Z.set(i.Z.model.clientData,JSON.stringify(s))),e.next=8;break;case 7:C(t);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),F=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={intent:"FETCH_FUNDS"},e.prev=1,e.next=4,(0,d.B3)();case 4:return e.next=6,i.Z.get(i.Z.model.smallcaseSDKToken).then(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&void 0!==(0,h.Z)(t).smallcaseAuthId){e.next=4;break}console.log("user not connected"),e.next=10;break;case 4:return e.next=6,u.Z.getSmallcaseTransactionId(n,(0,h.Z)(t).smallcaseAuthId).then((function(e){return e}));case 6:return r=e.sent,console.log("trx id ",r.data.data.transactionId),e.next=10,window.sc.triggerTransaction({transactionId:r.data.data.transactionId}).then((function(e){if(console.log(e),e.funds)try{console.log("blanace ",e.funds),j(e.funds),i.Z.set(i.Z.model.dematBalance,e.funds)}catch(n){l.Am.error(n)}})).catch((function(e){"user_cancelled"!==e.message&&l.Am.error("Something went wrong! Try again.")}));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("chandak",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return(0,m.jsxs)("div",{className:"menu-top-pannel",children:[(0,m.jsx)("div",{style:{width:"40px",height:"40px",backgroundColor:p.Z.getPropertyValue("--subtle"),color:p.Z.getPropertyValue("--darkGreen"),border:"1px solid "+p.Z.getPropertyValue("--light"),borderRadius:"20px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,m.jsx)("div",{className:"bigHeader",style:{fontSize:"20px"},children:(null===I||void 0===I||null===(e=I.Client)||void 0===e||null===(n=e[0].DisplayName)||void 0===n?void 0:n[0].toUpperCase())||""})}),(0,m.jsxs)("div",{className:"menu-top-pannel-cd",children:[(0,m.jsx)("div",{className:"header1faint",style:{textTransform:"capitalize"},children:null===I||void 0===I||null===(t=I.Client)||void 0===t?void 0:t[0].DisplayName}),(0,m.jsxs)("div",{className:"bodyTextLight",children:["Client ID: MB",null===I||void 0===I||null===(x=I.Client)||void 0===x?void 0:x[0].ClientId]})]}),(null===I||void 0===I||null===(g=I.SmallcaseInfo)||void 0===g?void 0:g.length)>0?(0,m.jsxs)("div",{className:"menu-top-pannel-demat",children:[(0,m.jsx)("div",{className:"bodyTextLight",children:"Demat balance"}),(0,m.jsxs)("div",{className:"header1dark",children:[(0,f.A)(T,"long",2)," ",(0,m.jsx)("img",{src:"https://d3etfstcuyoos5.cloudfront.net/app-images/menu_refresh.png",height:"18px",width:"18px",onClick:function(){F()}})]})]}):(0,m.jsx)("div",{className:"menu-top-pannel-demat",children:(0,m.jsx)("button",{className:"solidButton",style:{whiteSpace:"nowrap",padding:"0 4%"},onClick:(0,o.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.getSmallcaseTransactionId({intent:"CONNECT"}).then((function(e){return e}));case 2:if(!(n=e.sent).type){e.next=11;break}if(console.log("Trx id =>>",n.data.data.transactionId),void 0!==window.sc){e.next=9;break}return console.log("Initializing Smallcase"),e.next=9,(0,d.B3)();case 9:return e.next=11,window.sc.triggerTransaction({transactionId:n.data.data.transactionId}).then((function(e){console.log(e),e&&(0,d.pl)(k.id,e.smallcaseAuthToken,e.broker).then((function(e){console.log(e),e?(i.Z.remove(i.Z.model.clientData),l.Am.success("Demat linked")):l.Am.error("Demat already linked with another mintbox account")}))})).catch((function(e){"user_cancelled"!==e.message&&l.Am.error("Something went wrong! Try again.")}));case 11:case"end":return e.stop()}}),e)}))),children:"Link demat account"})})]})}},456:function(e,n,t){function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidCharacterError";var a="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var n=String(e).replace(/=+$/,"");if(n.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,a,o=0,c=0,i="";a=n.charAt(c++);~a&&(t=o%4?64*t+a:a,o++%4)?i+=String.fromCharCode(255&t>>(-2*o&6)):0)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);return i};function o(e){var n=e.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(a(e).replace(/(.)/g,(function(e,n){var t=n.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t})))}(n)}catch(e){return a(n)}}function c(e){this.message=e}c.prototype=new Error,c.prototype.name="InvalidTokenError",n.Z=function(e,n){if("string"!=typeof e)throw new c("Invalid token specified");var t=!0===(n=n||{}).header?0:1;try{return JSON.parse(o(e.split(".")[t]))}catch(e){throw new c("Invalid token specified: "+e.message)}}}}]);
//# sourceMappingURL=7523.0653ae6f.chunk.js.map