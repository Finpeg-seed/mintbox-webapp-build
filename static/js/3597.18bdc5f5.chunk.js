"use strict";(self.webpackChunkmintbox_app=self.webpackChunkmintbox_app||[]).push([[3597],{3597:function(e,n,r){r.r(n),r.d(n,{default:function(){return v}});var t=r(1413),s=r(4165),o=r(5861),a=r(9439),i=r(2791),c=r(7811),u=r(8848),d=r(2102),l=r(5709),p=r(6960),f=r(81),h=r(8820),x=r(5221),m=r(4561),Z=r(6561),g=r(184);function v(e){var n=(0,i.useState)({}),r=(0,a.Z)(n,2),v=r[0],y=r[1],w=(0,i.useState)({}),j=(0,a.Z)(w,2),b=(j[0],j[1],(0,i.useState)(!0)),k=(0,a.Z)(b,2),N=k[0],C=k[1],R=(0,i.useState)(!1),T=(0,a.Z)(R,2),A=T[0],S=T[1],_=(0,i.useState)(!1),P=(0,a.Z)(_,2),F=P[0],D=P[1];i.useEffect((function(){try{u.Z.get(u.Z.model.user).then(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(n.userData.id);case 2:y(n.userData),C(!1);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}catch(e){p.Am.error(e),C(!1)}}),[]);var G=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get(u.Z.model.portfolio).then(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(r){var o,a,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==r){e.next=15;break}return e.next=3,f.Z.getPortfolio(n).then((function(e){return e}));case 3:if(!0!==(o=e.sent).type){e.next=13;break}return e.next=7,JSON.parse(o.data);case 7:return a=e.sent,i=a.reduce((function(e,n){return(0,t.Z)((0,t.Z)({},e),n)}),{}),console.log("Get portfolio API :",i),D(i.MintboxConsolidated.length+i.ETFConsolidated.length+i.FundsConsolidated.length!==0),e.next=13,u.Z.set(u.Z.model.portfolio,JSON.stringify(i));case 13:e.next=16;break;case 15:D(r.MintboxConsolidated.length+r.ETFConsolidated.length+r.FundsConsolidated.length!==0);case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),z=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,f.Z.getPortfolioReport(v.id).then((function(e){return e}));case 3:n=e.sent,console.log(n),n.type?(window.open(n.data.Report_URL),p.Am.success("Report downloaded"),S(!1)):(p.Am.error("Report not found"),S(!1));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,f.Z.getTransactionReport(v.id).then((function(e){return e}));case 3:n=e.sent,console.log(n),n.type?(window.open(n.data.Report_URL),p.Am.success("Report downloaded"),S(!1)):(p.Am.error("Report not found"),S(!1));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)("div",{className:"mainContainer",children:[(0,g.jsx)(d.Z,{header:"Menu",right:"What are mintboxes?",rightAction:function(){},navigation:e.history}),N?(0,g.jsx)(m.Z,{}):(0,g.jsxs)("div",{className:"dataContainer px-0",children:[(0,g.jsx)(l.Z,{}),F?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"menu-card",children:[(0,g.jsx)("img",{src:Z.r2+"menu_report.webp",className:"menu-card-icon"}),(0,g.jsxs)("div",{className:"menu-card-body",children:[(0,g.jsx)("div",{className:"bodyTextDark",children:"Portfolio report"}),(0,g.jsxs)("div",{className:"header2dark secondaryGreen",onClick:function(){return z()},children:["Tap to download ",(0,g.jsx)(h.Td4,{size:12})]})]})]}),(0,g.jsxs)("div",{className:"menu-card",children:[(0,g.jsx)("img",{src:Z.r2+"menu_report.webp",className:"menu-card-icon"}),(0,g.jsxs)("div",{className:"menu-card-body",children:[(0,g.jsx)("div",{className:"bodyTextDark",children:"Transaction report"}),(0,g.jsxs)("div",{className:"header2dark secondaryGreen",onClick:function(){return E()},children:["Tap to download ",(0,g.jsx)(h.Td4,{size:12})]})]})]})]}):(0,g.jsxs)("div",{style:{display:"flex",padding:"4%",margin:"4%",border:"1px solid "+c.Z.getPropertyValue("--light"),borderRadius:"8px",backgroundColor:c.Z.getPropertyValue("--lightest")},children:[(0,g.jsxs)("div",{className:"bodyTextLight",style:{flex:1},children:["Your reports will be available once you ",(0,g.jsx)("span",{className:"secondaryGreen",onClick:function(){return e.history.push("/Invest")},children:"start investing"})]}),(0,g.jsx)("img",{src:Z.r2+"menu_report.webp",width:30,height:30,style:{margin:"2% 4%"}})]})]}),(0,g.jsx)(x.Z,{style:{color:"#fff",zIndex:1021},open:A,children:(0,g.jsx)(m.Z,{})})]})}}}]);
//# sourceMappingURL=3597.18bdc5f5.chunk.js.map