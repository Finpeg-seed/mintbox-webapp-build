"use strict";(self.webpackChunkmintbox_app=self.webpackChunkmintbox_app||[]).push([[2270],{2270:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var r=t(1413),o=t(4165),a=t(5861),i=t(9439),s=t(8848),l=t(2791),d=t(6960),u=t(6825),c=t(81),f=t(2102),p=t(7811),x=t(9657),v=t(4614),m=t(8617),h=t(71),Z=t(4561),y=t(5803),b=t(432),g=t(2919),j=t(8778),T=t(184);function F(e){var n,t,F,N,k,C,w,D,S,E,P,I,M,R,B,A,O,X=l.useState(!0),G=(0,i.Z)(X,2),V=G[0],J=G[1],U=l.useState(!1),z=(0,i.Z)(U,2),H=z[0],L=z[1],Y=l.useState(!1),_=(0,i.Z)(Y,2),q=_[0],K=_[1],Q=l.useState({}),W=(0,i.Z)(Q,2),$=W[0],ee=W[1],ne=l.useState({}),te=(0,i.Z)(ne,2),re=te[0],oe=te[1],ae=l.useState({}),ie=(0,i.Z)(ae,2),se=ie[0],le=ie[1],de=l.useState([]),ue=(0,i.Z)(de,2),ce=ue[0],fe=ue[1],pe=l.useState({}),xe=(0,i.Z)(pe,2),ve=(xe[0],xe[1]),me=e.location.state.MINTBOXID||0,he=e.location.state.FUNDCODE,Ze=e.location.state.TYPE,ye=e.location.state.FUNDDATA;l.useEffect((function(){be()}),[]);var be=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J(!0);try{s.Z.get(s.Z.model.user).then(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve(n.userData),e.next=3,ge(n.userData.id);case 3:return e.next=5,Te(n.userData.id);case 5:return e.next=7,je(n.userData.id);case 7:return e.next=9,Fe(n.userData.id);case 9:J(!1);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}catch(n){d.Am.error(n),J(!1)}case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.Z.get(s.Z.model.portfolio).then(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var a,i,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=15;break}return e.next=3,c.Z.getPortfolio(n).then((function(e){return e}));case 3:if(!0!==(a=e.sent).type){e.next=13;break}return e.next=7,JSON.parse(a.data);case 7:return i=e.sent,l=i.reduce((function(e,n){return(0,r.Z)((0,r.Z)({},e),n)}),{}),console.log("Get portfolio API :",l),ee(l),e.next=13,s.Z.set(s.Z.model.portfolio,JSON.stringify(l));case 13:e.next=16;break;case 15:ee(t);case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),je=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.Z.get(s.Z.model.portfolioPerformance).then(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var a,i,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=15;break}return e.next=3,c.Z.getPortfolioPerformance(n).then((function(e){return e}));case 3:if(!0!==(a=e.sent).type){e.next=13;break}return e.next=7,JSON.parse(a.data);case 7:return i=e.sent,l=i.reduce((function(e,n){return(0,r.Z)((0,r.Z)({},e),n)}),{}),console.log("Get portfolioPerformance API :",l),oe(l),e.next=13,s.Z.set(s.Z.model.portfolioPerformance,JSON.stringify(l));case 13:e.next=16;break;case 15:oe(t);case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Te=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.Z.get(s.Z.model.portfolioXirr).then(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var a,i,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=15;break}return e.next=3,c.Z.getPortfolioXIRR(n).then((function(e){return e}));case 3:if(!0!==(a=e.sent).type){e.next=13;break}return e.next=7,JSON.parse(a.data);case 7:return i=e.sent,l=i.reduce((function(e,n){return(0,r.Z)((0,r.Z)({},e),n)}),{}),console.log("Get portfolio XIRR API :",l),le(l),e.next=13,s.Z.set(s.Z.model.portfolioXirr,JSON.stringify(l));case 13:e.next=16;break;case 15:le(t);case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Fe=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.Z.get(s.Z.model.transactions).then(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=12;break}return e.next=3,c.Z.getTransactions(n).then((function(e){return e}));case 3:if(!0!==(r=e.sent).type){e.next=10;break}return a=r.data,console.log("Get transactions API :",a),fe(a),e.next=10,s.Z.set(s.Z.model.transactions,JSON.stringify(a));case 10:e.next=13;break;case 12:fe(t);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ne=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.remove(s.Z.model.portfolio);case 2:return e.next=4,s.Z.remove(s.Z.model.portfolioXirr);case 4:return e.next=6,s.Z.remove(s.Z.model.portfolioPerformance);case 6:return e.next=8,s.Z.remove(s.Z.model.assetAllocation);case 8:return e.next=10,s.Z.remove(s.Z.model.transactions);case 10:be();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var n=l.useState(),t=(0,i.Z)(n,2),o=t[0],a=t[1];return(0,T.jsxs)(u.Z,{className:"bottom-drawer",show:H,onHide:function(){return L(!1)},keyboard:!1,children:[(0,T.jsxs)(u.Z.Body,{children:["ETFConsolidated"===Ze?(0,T.jsxs)("div",{className:"radio-item",style:{marginTop:"6%"},children:[(0,T.jsx)("input",{type:"radio",name:"fund",onChange:function(e){a(e.target.value)},value:"sip",id:"sip"}),(0,T.jsx)("label",{className:"bodyTextDark radio-label",htmlFor:"sip",children:"Start a SIP"})]}):(0,T.jsx)(T.Fragment,{}),(0,T.jsxs)("div",{className:"radio-item",style:{marginTop:"6%"},children:[(0,T.jsx)("input",{type:"radio",name:"fund",onChange:function(e){a(e.target.value)},value:"redeem",id:"redeem"}),(0,T.jsx)("label",{className:"bodyTextDark radio-label",htmlFor:"redeem",style:{color:p.Z.getPropertyValue("--peach")},children:"Redeem"})]})]}),(0,T.jsxs)(u.Z.Footer,{children:[(0,T.jsx)("button",{className:"outlineButton",onClick:function(){return L(!1)},children:"Close"}),(0,T.jsx)("button",{className:"solidButton",onClick:function(){return function(){switch(o){case"redeem":e.history.push({pathname:"/portfolio/redeem-etf",state:{fundData:ye}}),L(!1);break;case"sip":L(!1),e.history.push({pathname:"/portfolio/confirm-invest",state:{fundData:(0,r.Z)((0,r.Z)({},ye),{},{MinSIPAmount:ye.NAV}),type:1,sip:!0}});break;default:L(!1)}}()},children:"Confirm"})]})]})},Ce=function(){var e=l.useState(),n=(0,i.Z)(e,2),t=(n[0],n[1]);return(0,T.jsxs)(u.Z,{className:"bottom-drawer",show:q,onHide:function(){return K(!1)},keyboard:!1,children:[(0,T.jsxs)(u.Z.Body,{children:[(0,T.jsxs)("div",{className:"radio-item",style:{marginTop:"6%"},children:[(0,T.jsx)("input",{type:"radio",name:"fund",onChange:function(e){t(e.target.value)},value:"editAmount",id:"editAmount"}),(0,T.jsx)("label",{className:"bodyTextDark radio-label",htmlFor:"editAmount",children:"Edit SIP amount"})]}),(0,T.jsxs)("div",{className:"radio-item",style:{marginTop:"6%"},children:[(0,T.jsx)("input",{type:"radio",name:"fund",onChange:function(e){t(e.target.value)},value:"editDate",id:"editDate"}),(0,T.jsx)("label",{className:"bodyTextDark radio-label",htmlFor:"editDate",children:"Edit SIP date"})]}),(0,T.jsxs)("div",{className:"radio-item",style:{marginTop:"6%"},children:[(0,T.jsx)("input",{type:"radio",name:"fund",onChange:function(e){t(e.target.value)},value:"pauseSip",id:"pauseSip"}),(0,T.jsx)("label",{className:"bodyTextDark radio-label",htmlFor:"pauseSip",children:"Pause SIP"})]}),(0,T.jsxs)("div",{className:"radio-item",style:{marginTop:"6%"},children:[(0,T.jsx)("input",{type:"radio",name:"fund",onChange:function(e){t(e.target.value)},value:"stopSip",id:"stopSip"}),(0,T.jsx)("label",{className:"bodyTextDark radio-label",htmlFor:"stopSip",style:{color:p.Z.getPropertyValue("--peach")},children:"Stop SIP"})]})]}),(0,T.jsxs)(u.Z.Footer,{children:[(0,T.jsx)("button",{className:"outlineButton",onClick:function(){return K(!1)},children:"Close"}),(0,T.jsx)("button",{className:"solidButton",onClick:function(){K(!1)},children:"Confirm"})]})]})},we=[{title:"SIPs",view:(0,j.Z)({navigation:e.history,TYPE:1,FUNDCODE:he,FUNDDATA:ye}),show:"ETFConsolidated"===Ze},{title:"Transactions",view:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(b.Z,{type:"transactionETF"}),(0,T.jsx)("div",{style:{marginTop:"2%"},children:"ETFConsolidated"===Ze||"MintboxETF"===Ze?ce.filter((function(e){return 1===e.FundType&&e.FundCode===he&&e.MintboxId===me})).reverse().map((function(e,n){return(0,T.jsx)(y.Z,{trx:e,i:n,type:1})})):"MintboxETFConsolidated"===Ze?ce.filter((function(e){return 1===e.FundType&&e.FundCode===he&&0!==e.MintboxId})).reverse().map((function(e,n){return(0,T.jsx)(y.Z,{trx:e,i:n,type:1})})):(0,T.jsx)(T.Fragment,{})})]}),show:!0},{title:"More info.",view:(0,T.jsx)("div",{style:{marginTop:"2%"},children:(0,T.jsxs)("div",{style:{display:"flex",padding:"4%",borderBottom:"1px solid "+p.Z.getPropertyValue("--light")},children:[(0,T.jsxs)("div",{style:{flex:1},children:[(0,T.jsx)("div",{className:"smallTextLight",children:"Ticker"}),(0,T.jsx)("div",{className:"bodyTextDark",children:null===ye||void 0===ye?void 0:ye.FundCode})]}),(0,T.jsxs)("div",{style:{flex:1},children:[(0,T.jsx)("div",{className:"smallTextLight",children:"Units owned"}),(0,T.jsx)("div",{className:"bodyTextDark",children:null===ye||void 0===ye?void 0:ye.Units})]})]})}),show:!0}];return V?(0,T.jsx)(Z.Z,{}):(0,T.jsxs)("div",{className:"mainContainer",children:[(0,T.jsx)(f.Z,{navigation:e.history,header:"ETF"}),(0,T.jsxs)("div",{className:"dataContainer px-0",children:[(0,T.jsx)("div",{style:{margin:"4% 4% 2%"},children:(0,T.jsxs)("div",{style:{display:"flex",gap:"4%"},children:[(0,T.jsx)(g.Z,{amcName:null===ye||void 0===ye?void 0:ye.AMCName,width:"40px",height:"40px"}),(0,T.jsx)("div",{style:{flex:1},children:(0,T.jsx)("div",{className:"header1dark",children:null===ye||void 0===ye?void 0:ye.ETFName})}),(0,T.jsx)(m.Hi9,{size:24,className:"secondaryGreen",onClick:function(){return e.history.push("/etf-detail/"+he)},style:{alignSelf:"center"}})]})}),"ETFConsolidated"===Ze?(0,T.jsx)(v.Z,{navigation:e.history,balance:null===ye||void 0===ye?void 0:ye.ETFBalance,previousBalance:null===(n=$.PrevETFConsolidated)||void 0===n||null===(t=n.find((function(e){return e.FundCode===he})))||void 0===t?void 0:t.PrevETFBalance,xirr:null===(F=se.ETFXIRR[he])||void 0===F?void 0:F.XIRR,onRefresh:function(){Ne()},growthChartData:null===re||void 0===re||null===(N=re.ETFs)||void 0===N||null===(k=N.filter((function(e){return e.FundCode===he&&0===e.MintboxId})))||void 0===k?void 0:k.map((function(e){return[new Date(e.NavDateStr).getTime(),e.Balance]}))}):"MintboxETF"===Ze?(0,T.jsx)(v.Z,{navigation:e.history,balance:null===ye||void 0===ye?void 0:ye.MintboxETFBalance,previousBalance:null===(C=$.PrevMintboxETF)||void 0===C||null===(w=C.find((function(e){return e.FundCode===he&&e.MintboxId===me&&0===e.GoalId})))||void 0===w?void 0:w.PrevMintboxETFBalance,xirr:null===(D=Object.values((null===se||void 0===se?void 0:se.MintboxETFXIRR)||{}))||void 0===D||null===(S=D.find((function(e){return e.FundCode===he&&e.MintboxId===me&&0===e.GoalId})))||void 0===S?void 0:S.XIRR,onRefresh:function(){Ne()},growthChartData:null===re||void 0===re||null===(E=re.ETFs)||void 0===E||null===(P=E.filter((function(e){return e.FundCode===he&&e.MintboxId===me})))||void 0===P?void 0:P.map((function(e){return[new Date(e.NavDateStr).getTime(),e.Balance]}))}):"MintboxETFConsolidated"===Ze?(0,T.jsx)(v.Z,{navigation:e.history,balance:null===ye||void 0===ye?void 0:ye.MintboxETFConsolidated,previousBalance:null===$||void 0===$||null===(I=$.PrevMintboxETFConsolidated)||void 0===I||null===(M=I.find((function(e){return e.FundCode===he})))||void 0===M?void 0:M.PrevMintboxETFConsolidated,xirr:null===(R=Object.values((null===se||void 0===se?void 0:se.MintboxETFConsolidatedXIRR)||{}))||void 0===R||null===(B=R.find((function(e){return e.FundCode===he})))||void 0===B?void 0:B.XIRR,onRefresh:function(){Ne()},growthChartData:null===re||void 0===re||null===(A=re.ETFConsolidated)||void 0===A||null===(O=A.filter((function(e){return e.FundCode===he})))||void 0===O?void 0:O.map((function(e){return[new Date(e.NavDateStr).getTime(),e.Balance]}))}):(0,T.jsx)(T.Fragment,{}),(0,T.jsx)(x.Z,{tabsObject:we.filter((function(e){return e.show})),color:p.Z.getPropertyValue("--darkGreen")})]}),"ETFConsolidated"===Ze||"MintboxETF"===Ze?(0,T.jsxs)("div",{className:"bottom-nav",children:[(0,T.jsxs)("div",{className:"bn-tab",onClick:function(){e.history.push("/dashboard")},children:[(0,T.jsx)(m.VRM,{size:20,className:"footerIcon"}),(0,T.jsx)("div",{className:"footerText",children:"Home"})]}),(0,T.jsx)("div",{className:"bn-tab",style:{flex:3},children:(0,T.jsx)("button",{className:"solidButton",onClick:function(){return e.history.push({pathname:"/portfolio/confirm-invest",state:{fundData:(0,r.Z)((0,r.Z)({},ye),{},{MinSIPAmount:ye.NAV}),type:1}})},children:"Invest more"})}),(0,T.jsx)("div",{className:"bn-tab",children:(0,T.jsx)(h.bwG,{size:"48",color:p.Z.getPropertyValue("--secondaryGreen"),onClick:function(){return L(!0)}})})]}):"",(0,T.jsx)(ke,{}),(0,T.jsx)(Ce,{})]})}},432:function(e,n,t){var r=t(4165),o=t(4942),a=t(1413),i=t(5861),s=t(9439),l=t(8848),d=t(2791),u=t(8820),c=t(7811),f=t(184);n.Z=function(e){var n=e.type,t=e.goalDate,p=d.useState({}),x=(0,s.Z)(p,2),v=x[0],m=x[1];d.useEffect((function(){l.Z.get(l.Z.model.dismissNotes).then((function(e){m(e)}))}),[]);var h=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m((0,a.Z)((0,a.Z)({},v),{},(0,o.Z)({},n,!0))),e.next=3,l.Z.set(l.Z.model.dismissNotes,JSON.stringify((0,a.Z)((0,a.Z)({},v),{},(0,o.Z)({},n,!0))));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z="etf"===n?{header:"Important",body:"Only ETFs invested in independently (and not as a part of a mintbox) are shown below"}:"transactionETF"===n||"transactionMF"===n?{header:"Note",body:"Transactions initiated on mintbox are shown below. Transactions initiated on other apps will not appear."}:"goal"===n?{header:"",body:"You planned for this goal on "+new Date(t).toDateString()}:{};return null!==v&&void 0!==v&&v[n]?(0,f.jsx)(f.Fragment,{}):(0,f.jsx)("div",{style:{padding:"4%",borderBottom:"1px solid "+c.Z.getPropertyValue("--light")},onClick:function(){return h()},children:(0,f.jsxs)("div",{style:{padding:"2% 4%",backgroundColor:c.Z.getPropertyValue("--moderateRisk"),borderRadius:"8px"},children:[(0,f.jsx)("div",{className:"header2dark",children:Z.header}),(0,f.jsx)("div",{className:"smallTextLight",style:{margin:"2px 0"},children:Z.body}),(0,f.jsxs)("div",{className:"header3dark secondaryGreen",children:[" Tap to dismiss ",(0,f.jsx)(u.Td4,{size:12})]})]})})}}}]);
//# sourceMappingURL=2270.95ba252e.chunk.js.map